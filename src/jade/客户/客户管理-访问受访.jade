doctype html
html
    head
        meta(charset='utf-8')
        meta(name='renderer' content='webkit')
        meta(http-equiv='X-UA-Compatible' content='IE=edge,chrome=1')
        link(href='../../css/common.css' rel='stylesheet')
        link(href='../../jquery-easyui-1.5/metro/easyui.css' rel='stylesheet')
        link(href='../../jquery-easyui-1.5/icon.css' rel='stylesheet')
    body
        // 查询
        div.easyui-tabs#easyui-tabs(style='width: 100%;')
            div(title='访问记录' style='padding: 10px;')
                form.eui-queryBox.clearfix#form1
                    div.eui-queryBox-left
                        span.eui-queryBox-group
                            | 名称：
                            input.easyui-textbox.eui-formComponent#ceshi11(type='text')
                        span.eui-queryBox-group
                            | 引合编码：
                            input.easyui-textbox.eui-formComponent#ceshi12(type='text')
                        span.eui-queryBox-group
                            | 约定编码：
                            input.easyui-textbox.eui-formComponent#ceshi13(type='text')
                    div.eui-queryBox-right
                        a.easyui-linkbutton#formQuery1(data-options="iconCls: 'icon-search'") 查询
                        a.easyui-linkbutton#formReset1(data-options="iconCls: 'icon-clear'") 重置
                // 数据
                table#table1(style='width: 100%;' data-options="url: 'http://127.0.0.1:10086/data2', toolbar: '#toolbar-all-1'")
                    thead
                        tr
                            th(data-options="field: 'f1', width: '5%'") 序号
                            th(data-options="field: 'f2', width: '10%'") 客户名称
                            th(data-options="field: 'f3', width: '15%'") 引合编码
                            th(data-options="field: 'f4', width: '10%'") 出访人
                            th(data-options="field: 'f5', width: '10%'") 会见者
                            th(data-options="field: 'f5', width: '10%'") 会见地址
                            th(data-options="field: 'f5', width: '10%'") 开始时间
                            th(data-options="field: 'f5', width: '10%'") 结束时间
                            th(data-options="field: 'f5', width: '10%'") 访问目的
                            th(data-options="field: 'f5', width: '10%'") 推进事项
            div(title='受访记录' style='padding: 10px;')
                form.eui-queryBox.clearfix#form2
                    div.eui-queryBox-left
                        span.eui-queryBox-group
                            | 名称：
                            input.easyui-textbox.eui-formComponent#ceshi21(type='text')
                        span.eui-queryBox-group
                            | 引合编码：
                            input.easyui-textbox.eui-formComponent#ceshi22(type='text')
                        span.eui-queryBox-group
                            | 约定编码：
                            input.easyui-textbox.eui-formComponent#ceshi23(type='text')
                    div.eui-queryBox-right
                        a.easyui-linkbutton#formQuery2(data-options="iconCls: 'icon-search'") 查询
                        a.easyui-linkbutton#formReset2(data-options="iconCls: 'icon-clear'") 重置
                // 数据
                table#table2(style='width: 100%;' data-options="url: 'http://127.0.0.1:10086/data2', toolbar: '#toolbar-all-2'")
                    thead(data-options="frozen: true")
                        tr
                            th(data-options="field: 'f1', width: '5%'") 序号
                            th(data-options="field: 'f2', width: '10%'") 客户名称
                            th(data-options="field: 'f3', width: '15%'") 引合编码
                            th(data-options="field: 'f4', width: '10%'") 出访人
                            th(data-options="field: 'f5', width: '10%'") 会见者
                            th(data-options="field: 'f5', width: '15%'") 会见地址
                            th(data-options="field: 'f5', width: '10%'") 开始时间
                            th(data-options="field: 'f5', width: '10%'") 结束时间
                            th(data-options="field: 'f5', width: '10%'") 访问目的
                            th(data-options="field: 'f5', width: '10%'") 推进事项
        // 工具栏
        div.display-none
            div#toolbar-all-1
                a.easyui-linkbutton#toolbar-all-look-1(data-options="iconCls:'icon-search', plain:true") 查看
                a.easyui-linkbutton(href='./客户管理-访问受访-添加访问受访.html', data-options="iconCls: 'icon-add', plain:true") 添加访问/受访
            div#toolbar-all-2
                a.easyui-linkbutton#toolbar-all-look-2(data-options="iconCls:'icon-search', plain:true") 查看
                a.easyui-linkbutton(href='./客户管理-访问受访-添加访问受访.html', data-options="iconCls: 'icon-add', plain:true") 添加访问/受访
        // js
        script(src='../../js/common/require.2.2.0.min.js')
        script(src='../../js/common/require.config.js')
        script.
            require(["common", "initDatagrid", "formQuery", "formReset", "btnCtrlTable", "tabsEventListenerFun"], function(common, initDatagrid, formQuery, formReset, btnCtrlTable, tabsEventListenerFun){
                tabsEventListenerFun($("#easyui-tabs"), [
                    function(){
                        var $table = $("#table1");
                        var $btnLook = $("#toolbar-all-look1");
                        initDatagrid($table, {
                            "look": $btnLook
                        });
                         btnCtrlTable($btnLook, $table, "https://baidu.com", "openWindow", {
                            "name": function () {
                                return "duanhaochen";
                            },
                            "text": "水浒传"
                        }, {
                            width: 600,
                            height: 400,
                            title: "新窗口"
                        });
                        // 查询
                        formQuery($("#formQuery1"), $table, "http://127.0.0.1:10086/data1", {
                            "ceshi1": function () {
                                return $("#ceshi11").val();
                            },
                            "ceshi2": function () {
                                return $("#ceshi12").val();
                            },
                            "ceshi3": function () {
                                return $("#ceshi13").val();
                            }
                        });
                        // 重置
                        formReset($("#formReset1"), $("#form1"));
                    },
                    function(){
                        var $table = $("#table2");
                        var $btnLook = $("#toolbar-all-look2");
                        initDatagrid($table, {
                            "look": $btnLook
                        });
                        btnCtrlTable($btnLook, $table, "https://baidu.com", "openWindow", {
                            "name": function () {
                                return "duanhaochen";
                            },
                            "text": "水浒传"
                        }, {
                            width: 600,
                            height: 400,
                            title: "新窗口"
                        });
                        // 查询
                        formQuery($("#formQuery2"), $table, "http://127.0.0.1:10086/data1", {
                            "ceshi1": function () {
                                return $("#ceshi21").val();
                            },
                            "ceshi2": function () {
                                return $("#ceshi22").val();
                            },
                            "ceshi3": function () {
                                return $("#ceshi23").val();
                            }
                        });
                        // 重置
                        formReset($("#formReset2"), $("#form2"));
                    }
                ], false, 0);
            });


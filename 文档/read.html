<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>文档</title>
    <link href="css/prism.css" rel="stylesheet">
    <script src="js/prism.js"></script>
</head>
<body>
<!-- 1 -->
<pre>
<h3>1、模块化工具</h3>
  采用的js的模块化工具是require.js。
</pre>
<pre><code class="language-javascript">
/*** 配置文件 ***/
require.config({
    baseUrl: '/js/',
    paths: {
        // name: address
        /* 基本的js文件 */
        "jquery": "./common/jquery.1.12.4.min", // jquery
        "easyui": "./common/jquery.easyui.min", // easyui
        "zh_CN": "./common/easyui-lang-zh_CN",  // 汉化文件
        "common": "./modules/common",           // 基本的打包文件，将每页需要的公用文件打包进来
        /* 数据网格的操作 */
        "initDatagrid": "./modules/datagrid/initDatagrid",                 // 初始化分页数据处理的表格
        "tabsEventListenerFun": "./modules/datagrid/tabsEventListenerFun", // 选项卡绑定事件
        "btnCtrlTable": "./modules/datagrid/btnCtrlTable",                 // 按钮操作表格的数据
        "tableFunction": "./modules/datagrid/tableFunction",               // 操作表格数据的方法
        /* 表单相关 */
        "formSubmit": "./modules/form/formSubmit"                          // 表单提交
    },
    // 打包依赖
    shim: {
        "easyui": {
            deps: ["jquery"]
        },
        "zh_CN": {
            deps: ["jquery", "easyui"]
        }
    }
});

/*** 载入js文件 ***/
require(
    [m1, m2, m3], // name，相对地址，绝对地址
    function(m1, m2, m3){
        m1();
        m2();
        m3();
	}
);
</code></pre>

<!-- 2 -->
<pre>
<h3>2、初始化带分页的数据网格</h3>
  文件：initDatagrid.js。
</pre>
<pre><code class="language-javascript">
require(["initDatagrid"], function(initDatagrid){
	initDatagrid(
		$element, // $(selector)
		btn       // &lt;object&gt;操作按钮，key:json对应的字段，value:$(selector)
	);
}
</code></pre>
<pre>
  数据传递参数：page 当前分页，rows 一页显示的数据。
  
  json数据格式：total 数据总数，rows 数据
</pre>
<pre><code class="language-json">
{
  "total": 30,
  "rows":[
    {
      "f1": 0,
      "f2": "f2",
      "f3": "f3",
      "f4": "f4",
      "look": true,
      "del": true
    }
]}
</code></pre>

<!-- 3 -->
<pre>
<h3>3、选项卡绑定点击事件</h3>
  文件：tabsEventListenerFun.js。
</pre>
<pre><code class="language-javascript">
require(["tabsEventListenerFun"], function(tabsEventListenerFun){
	tabsEventListenerFun(
		$element, // $(selector)
		fun,      // &lt;array&gt;各个索引执行的事件，没有事件就传递null
		more,     // &lt;boolean&gt;执行次数，true 多次，false 一次
		index     // &lt;number&gt;初始化执行的函数，默认不执行
	);
}
</code></pre>

<!-- 4 -->
<pre>
<h3>4、按钮操纵表格数据</h3>
  文件：btnCtrlTable.js。依赖tableFunction.js。
</pre>
<pre><code class="language-javascript">
require(["btnCtrlTable"], function(btnCtrlTable){
	btnCtrlTable(
		$btnElement,   // $(selector)
        $tableElement  // &lt;array|null|object&gt;需要刷新的表格的数组或单个对象，如果不刷新就传null
		url,           // &lt;string&gt;按钮操作的地址
		ctrl,          // &lt;string&gt;按钮点击后执行的方法，比如"ajax"、"openWindow"
		dataFun,       // &lt;object&gt;数据以及获取的方法。key:参数的名字，value:参数的值，&lt;function&gt;或者&lt;string&gt;，function需要返回获取的参数的值
        options        // &lt;object&gt;其他的可选择的配置选项
                       // ajax：success 执行成功的提示，fail 执行失败的提示
                       // openWindow：width 窗口宽度，height 窗口高度，title 窗口标题
	);
}
</code></pre>

<!-- 5 -->
<pre>
<h3>5、操作表格数据的方法</h3>
  文件：tableFunction.js。
</pre>
<pre><code class="language-javascript">
require(["tableFunction"], function(tableFunction){
	tableFunction(
		url,     // &lt;string&gt;地址
		ctrl,    // &lt;string&gt;执行的方法，比如"ajax"、"openWindow"
        dataFun, // &lt;object&gt;数据以及获取的方法。key:参数的名字，value:参数的值，&lt;function&gt;或者&lt;string&gt;，function需要返回获取的参数的值
        callback // &lt;function&gt;事件执行完的回调函数
	);
}
</code></pre>

<!-- 6 -->
<pre>
<h3>6、表单提交</h3>
  文件：formSubmit.js。
</pre>
<pre><code class="language-javascript">
require(["formSubmit"], function(formSubmit){
	formSubmit(
		$save, // 提交按钮$(selector)
		$form, // 表单$(selector)
		url,   // &lt;string&gt;表单提交地址
		text   // &lt;object&gt;提交成功或失败的提示文字，success 成功，fail 失败
	);
}
</code></pre>

<!-- 7 -->
<pre>
<h3>7、文件上传后自动给input添加文件名</h3>
  文件：fileGetName.js。
</pre>
<pre><code class="language-javascript">
require(["./js/fileGetName.js"], function(fileGetName){
	fileGetName(
		$filebox, // 上传的$(selector)
		$input    // 显示上传的文件名的input$(selector)
	);
}
</code></pre>
</body>
</html>
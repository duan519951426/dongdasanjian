doctype html
html
    head
        meta(charset='utf-8')
        meta(name='renderer' content='webkit')
        meta(http-equiv='X-UA-Compatible' content='IE=edge,chrome=1')
        link(href='../../css/common.css' rel='stylesheet')
        link(href='../../jquery-easyui-1.5/bootstrap/easyui.css' rel='stylesheet')
        link(href='../../jquery-easyui-1.5/icon.css' rel='stylesheet')
    body
        div.easyui-panel(title='预算编辑' style='width: 100%;padding: 10px;')
            // 预算成本选择
            div.easyui-panel(title='预算成本选择' style='width: 100%;border: none;' data-options="footer: '.panel-footer-1', collapsible: true")
                table.easyui-datagrid#tableChoice(style='width: 100%;border: none;' data-options="url: 'http://127.0.0.1:10086/data2', fitColumns: true, autoRowHeight: false")
                    thead
                        tr
                            th(data-options="field: 'f3', checkbox: true") 选择
                            th(data-options="field: 'f2', width: '300'") 成本划分
                            th(data-options="field: 'f4', width: '600'") 主项目及辅助项目名称
            div.eui-panel-footer.panel-footer-1
                a.easyui-linkbutton#assignTableChecked(data-options="iconCls: 'icon-ok'") 确认选择项
                a.easyui-linkbutton#clearTableChecked(data-options="iconCls: 'icon-clear'") 清空选择项
            // 预算明细及说明
            div.easyui-panel(title='预算明细及说明' style='width: 100%;padding: 10px;' data-options="footer: '.panel-footer-2', collapsible: true")
                table.easyui-treegrid#tableDnd(style='width: 100%;border: none;' data-options="toolbar: '#toolbar', idField: 'id', treeField: 'f2', fitColumns: true, autoRowHeight: false")
                    thead
                        tr
                            th(data-options="field: 'f2', width: '10%'") 成本划分
                            th(data-options="field: 'f3', width: '15%'") 型式或规格
                            th(data-options="field: 'f3', width: '15%'") 单价
                            th(data-options="field: 'f4', width: '15%'") 数量
                            th(data-options="field: 'f5', width: '15%'") 小计
                            th(data-options="field: 'f6', width: '15%'") 费用备注
                            th(data-options="field: 'f7', width: '15%'") 项目合计金额
                div.display-none
                    div#toolbar
                        a.easyui-linkbutton#toolbar-addZilei(data-options="iconCls:'icon-add', plain:true") 添加子类
                        a.easyui-linkbutton#toolbar-addYusuan(data-options="iconCls:'icon-add', plain:true") 添加预算
                        a.easyui-linkbutton#toolbar-del(data-options="iconCls:'icon-cancel', plain:true") 删除

                div.eui-panel-footer.panel-footer-2
                    a.easyui-linkbutton#clearTableDnd(data-options="iconCls: 'icon-clear'") 清空预算明细
        // 添加预算窗口
        div.easyui-window(title='添加预算' style='width: 700px;height: 500px;' data-options='minimizable: false, maximizable: false')
            div.easyui-tabs(style='width: 100%;height: 100%;' data-options="tabPosition: 'left', headerWidth: 85")
                div(title='采购材料')
                    div.easyui-panel(style='width: 100%;height: 100%;padding: 10px;border: none;' data-options="footer: '#footer0'")
                        table.eui-formLayout
                            tr
                                td.textAlign-right 规格型号：
                                td.eui-formLayout-option
                                    select.easyui-combobox.eui-formComponent(data-options="editable: false, url: 'http://127.0.0.1:10086/combobox', method: 'GET', valueField: 'id', textField: 'text'")
                                td.textAlign-right 单位：
                                td.eui-formLayout-option
                            tr
                                td.textAlign-right 单价：
                                td
                                td.textAlign-right 数量：
                                td
                                    input.easyui-textbox.eui-formComponent(type='text')
                            tr
                                td.textAlign-right 小计：
                                td
                            tr
                                td.textAlign-right 备注：
                                td(colspan='3')
                                    input.easyui-textbox.eui-formExplain(type='text')
                    div.eui-panel-footer#footer0
                        a.easyui-linkbutton 查询资材
                        a.easyui-linkbutton 保存
                        a.easyui-linkbutton 修改技术指标
                div(title='采购费用')
                    div.easyui-panel(style='width: 100%;height: 100%;padding: 10px;border: none;' data-options="footer: '#footer1'")
                        table.eui-formLayout
                            tr
                                td.textAlign-right 费用类型：
                                td.eui-formLayout-option
                                    select.easyui-combobox.eui-formComponent(data-options="url: 'http://127.0.0.1:10086/combobox', method: 'GET', valueField: 'id', textField: 'text'")
                                td.textAlign-right 小计：
                                td.eui-formLayout-option
                                    input.easyui-textbox.eui-formComponent(type='text')
                    div.eui-panel-footer#footer1
                        a.easyui-linkbutton 保存
                div(title='工务材料')
                div(title='工务费用')
        // js
        script(src='../../js/common/require.2.2.0.min.js')
        script(src='../../js/common/require.config.js')
        script.
            require([
                "common",
                "../../js/modules/manuallyAddBudget/clearTableChecked.js", // 清空选择项
                "../../js/modules/manuallyAddBudget/clearTableDnd.js",      // 清空预算明细
                "../../js/modules/manuallyAddBudget/manuallyAddBudget.js"
            ], function(common, clearTableChecked, clearTableDnd, manuallyAddBudget){
                var $tableChoice = $("#tableChoice");
                clearTableChecked($("#clearTableChecked"), $tableChoice);
                clearTableDnd($("#clearTableDnd"), $("#tableDnd"));
                manuallyAddBudget();
            });